const{storeMap:storeMap,notifyStack:notifyStack}=require("../constant"),{cloneObj:cloneObj}=require("../utils");module.exports=function(t){return function(n){const{onLoad:o,onUnload:a}=n;return n.onLoad=function(n){const a=t.call(this,storeMap,n),i=cloneObj(a);notifyStack.push([this,t.bind(this),i,n]),this.setData(Object.assign({},this.data,a)),o&&o.call(this,n)},n.onUnload=function(){notifyStack.pop(),a&&a.call(this)},n}};